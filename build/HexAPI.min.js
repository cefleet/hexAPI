var HexAPI={setup:function(){this.engine=new HexAPI.Engine,this.defaultGrid=new HexAPI.Grid}};HexAPI.Engine=function(){this._init()},HexAPI.Engine.prototype={_init:function(){this.EVEN=1,this.ODD=-1,this._createLayout(),this._createDirections()},_createLayout:function(){this.LAYOUT={POINTY:this._orientation(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,.5),FLAT:this._orientation(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0)}},_createDirections:function(){this.DIRECTIONS=[this._hex(1,0,-1),this._hex(1,-1,0),this._hex(0,-1,1,!0),this._hex(-1,0,1),this._hex(-1,1,0),this._hex(0,1,-1)]},_hex:function(a,b,c){return{q:a,r:b,s:c}},_point:function(a,b){return{x:a,y:b}},_hexAdd:function(a,b){return this._hex(a.q+b.q,a.r+b.r,a.s+b.s)},_hexSubtract:function(a,b){return this._hex(a.q-b.q,a.r-b.r,a.s-b.s)},_hexScale:function(a,b){return this._hex(a.q*b,a.r*b,a.s*b)},_direction:function(a){return this.DIRECTIONS||this._createDirections(),this.DIRECTIONS[a]},_length:function(a){return Math.trunc((Math.abs(a.q)+Math.abs(a.r)+Math.abs(a.s))/2)},_distance:function(a,b){return this._length(this._hexSubtract(a,b))},neighborAtDirection:function(a,b){var c=this._direction(b);return this._hexAdd(a,c)},_orientation:function(a,b,c,d,e,f,g,h,i){return{f0:a,f1:b,f2:c,f3:d,b0:e,b1:f,b2:g,b3:h,start_angle:i}},createLayout:function(a,b,c){return c="pointy"==c?this.LAYOUT.POINTY:this.LAYOUT.FLAT,{orientation:c,hexSize:a,origin:b}},centerOfHex:function(a,b){var c=a.orientation,d=a.hexSize,e=a.origin,f=(c.f0*b.q+c.f1*b.r)*d.x,g=(c.f2*b.q+c.f3*b.r)*d.y;return this._point(f+e.x,g+e.y)},_roundToHex:function(a){var b=Math.trunc(Math.round(a.q)),c=Math.trunc(Math.round(a.r)),d=Math.trunc(Math.round(a.s)),e=Math.abs(b-a.q),f=Math.abs(c-a.r),g=Math.abs(d-a.s);return e>f&&e>g?b=-c-d:f>g?c=-b-d:d=-b-c,this._hex(b,c,d)},_cornerOffset:function(a,b){var c=a.orientation,d=a.hexSize,e=2*Math.PI*(b+c.start_angle)/6;return this._point(d.x*Math.cos(e),d.y*Math.sin(e))},cornersOfHex:function(a,b){for(var c=[],d=this.centerOfHex(a,b),e=0;6>e;e++){var f=this._cornerOffset(a,e);c.push(this._point(d.x+f.x,d.y+f.y))}return c},hexAtPoint:function(a,b){var c=a.orientation,d=a.hexSize,e=a.origin,f=new this._point((b.x-e.x)/d.x,(b.y-e.y)/d.y),g=c.b0*f.x+c.b1*f.y,h=c.b2*f.x+c.b3*f.y,i=this._hex(g,h,-g-h);return this._roundToHex(i)},_hexLerp:function(a,b,c){return this._hex(a.q+(b.q-a.q)*c,a.r+(b.r-a.r)*c,a.s+(b.s-a.s)*c)},_defineLineBetweenHexes:function(a,b){for(var c=this._distance(a,b),d=[],e=1/Math.max(c,1),f=0;c>=f;f++)d.push(this._roundToHex(this._hexLerp(a,b,e*f)));return d}},HexAPI.Grid=function(a){this._init(a)},HexAPI.Grid.prototype={_init:function(a){this.engine=HexAPI.engine,a=a||{},this.hexSize=a.hexSize||{x:40,y:40},this.origion=a.origion||{x:0,y:0},this.orientation=a.orientation||"flat",this.layout=this.engine.createLayout(this.hexSize,this.origion,this.orientation),this.rows=a.rows||30,this.cols=a.cols||20,this._createMap()},_createMap:function(){this.map={};"pointy"==this.orientation?this._makePointyMap():this._makeFlatMap()},_makePointyMap:function(){for(r=0;r<this.rows;r++){var a=Math.floor(r/2);for(q=-a;q<this.cols-a;q++){var b=new HexAPI.Hex({q:q,r:r,s:-q-r,grid:this});this.map[b.id]=b}}},_makeFlatMap:function(){for(q=0;q<this.cols;q++){var a=Math.floor(q/2);for(r=-a;r<this.rows-a;r++){var b=new HexAPI.Hex({q:q,r:r,s:-q-r,grid:this});this.map[b.id]=b}}}},HexAPI.Hex=function(a){this._init(a)},HexAPI.Hex.prototype={_init:function(a){this.engine=HexAPI.engine,this.grid=a.grid||HexAPI.defaultGrid,a=a||{},this.q=a.q||0,this.r=a.r||0,this.s=a.s||0,this.id=this.q+"."+this.r+"."+this.s,this._setCenter(),this._setCorners(),this._setEdges(),this._setNeighbors()},getNeighborAt:function(a){return this.neighbors[a]},_setCorners:function(){this.corners=this.engine.cornersOfHex(this.grid.layout,this)},_setEdges:function(){this.edges=[];for(var a=1;6>a;a++)this.edges.push({p1:this.corners[a-1],p2:this.corners[a]});this.edges.push({p1:this.corners[5],p2:this.corners[0]})},_setCenter:function(){this.centerPoint=this.engine.centerOfHex(this.grid.layout,this)},_setNeighbors:function(){this.neighbors=[];for(var a=0;6>a;a++){var b=this.engine.neighborAtDirection(this,a);this.neighbors.push(b.q+"."+b.r+"."+b.s)}}};
//# sourceMappingURL=HexAPI.min.map